<h1>Javascript API</h1>

<!-- Log in -->
<script>
function logInToYammer() {
	yam.getLoginStatus(
		function(response) {
			if (response.authResponse) {
				console.log("logged in");
				console.dir(response);
			}
			else {
				yam.login(function (response) {
					if (response.authResponse) {
						console.dir(response);
					}
				});
			}
		}
	);
}
</script>

<!-- Make a REST call -->
<script>
function postMessage () {
	yam.getLoginStatus(
		function(response) {
			if (response.authResponse) {
				console.log("logged in");
				yam.request({
					url: "https://www.staging.yammer.com/api/v1/messages.json",
					method: "POST",
					data: {
						"body": "@nmccarthy is great",
						"og_url": "http://www.google.com#vaf18yyysddeadsdfe"
					},
					success: function (users) {
						alert("The request was successful.");
						console.dir(users);
					},
					error: function (users) {
						alert("There was an error with the request.");
					}
				});
			}
			else {
				alert("not logged in")
			}
		}
	);
}
</script>

<!-- Logout -->
<!-- <script>
  yam.getLoginStatus(
    function(response) {
	  if(response.authResponse) {
        yam.logout(function (response) {
          alert("user was logged out");
        })
      }
    }
  );
</script> -->

<p><a href="#" onclick="logInToYammer()">Log In With Yammer</a></p>
<p><a href="#" onclick="postMessage()">Post a Message</a></p>

<span id="yammer-login"></span>